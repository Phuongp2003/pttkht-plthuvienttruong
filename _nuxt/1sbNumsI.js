import{k,c as l,e as n,f as t,F as _,B as b,t as d,G as y,i as m,H as x}from"./CTgkKhgB.js";import{_ as g}from"./DqUGzaU8.js";import{u as f}from"./CYg_ePKU.js";import"./Cpj98o6Y.js";const v={props:{books:{type:Array,required:!0}},data(){return{selectedPublisher:null,loading:!1}},async created(){},methods:{selectPublisher(s){this.selectedPublisher=s},deselectPublisher(){this.selectedPublisher=null},addAllBooksToWarehouse(){this.$emit("add-all-books",this.books[this.selectedPublisher]),this.$delete(this.books,this.selectedPublisher),this.selectedPublisher=null}}},B={class:"container mx-auto book-list-container",id:"booklist"},P={key:0},w={class:"grid grid-cols-1 gap-6 mt-4 sm:grid-cols-2 lg:grid-cols-3"},T=["onClick"],F={class:"text-lg font-semibold"},S={class:"text-gray-700"},A={key:1},C={class:"my-6 text-2xl font-bold text-center"},I={class:"p-4 mb-4 bg-gray-100 rounded shadow"},L={class:"text-gray-700"},j={class:"grid grid-cols-1 gap-6 mt-4 sm:grid-cols-2 lg:grid-cols-5"},D=["src","alt"],N={class:"mb-2 text-lg font-semibold"},W={class:"text-gray-700"};function E(s,e,c,h,r,i){return l(),n("div",B,[r.selectedPublisher?(l(),n("div",A,[t("button",{onClick:e[0]||(e[0]=(...o)=>i.deselectPublisher&&i.deselectPublisher(...o)),class:"p-2 mb-4 text-white bg-blue-500 rounded"}," Quay lại "),t("h2",C,d(r.selectedPublisher),1),t("div",I,[e[3]||(e[3]=t("h3",{class:"text-lg font-semibold"},"Thông tin Nhà Xuất Bản",-1)),t("p",L," Số sách: "+d(c.books[r.selectedPublisher].length),1),t("button",{onClick:e[1]||(e[1]=(...o)=>i.addAllBooksToWarehouse&&i.addAllBooksToWarehouse(...o)),class:"p-2 mt-2 text-white bg-green-500 rounded"}," Thêm tất cả sách vào kho ")]),t("div",j,[(l(!0),n(_,null,b(c.books[r.selectedPublisher],o=>(l(),n("div",{key:o.id,class:"relative p-4 bg-white rounded shadow book-card"},[t("img",{src:o.cover,alt:o.title,class:"object-cover w-full h-48 mb-4 rounded"},null,8,D),t("h3",N,d(o.title),1),t("p",W,d(o.author),1)]))),128))])])):(l(),n("div",P,[e[2]||(e[2]=t("h2",{class:"my-6 text-2xl font-bold text-center"}," Chọn nhà phát hành ",-1)),t("div",w,[(l(!0),n(_,null,b(c.books,(o,a)=>(l(),n("div",{key:a,class:"p-4 bg-white rounded shadow cursor-pointer hover:bg-gray-100",onClick:u=>i.selectPublisher(a)},[t("h3",F,d(a),1),t("p",S,"Số sách: "+d(o.length),1)],8,T))),128))])]))])}const p=k(v,[["render",E],["__scopeId","data-v-9a69e77d"]]),Q={components:{BookSearch:g,ImportBookList:p},data(){return{books:null,filteredBooks:[],loading:!1}},async created(){try{const{data:s,pending:e,error:c}=await f("books",()=>fetch("/data/bookS.json").then(h=>h.json()));this.loading=e,this.books=s,this.filteredBooks=this.books}catch(s){console.error("Error fetching top books:",s)}},methods:{applyFilter(s){this.filteredBooks=this.books.filter(e=>e.title.includes(s.searchQuery)&&e.author.includes(s.publisher)&&(s.bookType==="all"||e.type===s.bookType)&&(s.edition===""||e.edition===s.edition))}}},V={key:1};function q(s,e,c,h,r,i){const o=x,a=g,u=p;return l(),n("div",null,[e[0]||(e[0]=t("h2",{class:"my-6 text-2xl font-bold text-center"},"Tìm sách",-1)),r.loading?(l(),y(o,{key:0})):(l(),n("div",V,[m(a,{onFilter:i.applyFilter},null,8,["onFilter"]),m(u,{books:r.filteredBooks},null,8,["books"])]))])}const J=k(Q,[["render",q],["__scopeId","data-v-c40ee84f"]]);export{J as default};
