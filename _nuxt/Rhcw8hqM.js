import{_ as g}from"./Bnx14dP4.js";import{_ as B}from"./CrNqEc6L.js";import{_ as h}from"./6Sk3rhAD.js";import{k as u,r as x,c as s,e as n,F as f,B as P,h as b,i as d,D as y,w as v,f as i,t as l}from"./LFDqsYmP.js";import"./Cpj98o6Y.js";const w={components:{Pagination:h},props:{books:{type:Array,required:!0}},data(){return{page:{current:1,max:1},paginatedBooks:[]}},mounted(){this.page.max=Math.ceil(this.books.length/18),this.page.current=1,this.updatePaginatedBooks()},watch:{books:{handler(){this.page.max=Math.ceil(this.books.length/18),this.page.current=1,this.updatePaginatedBooks()},immediate:!0,deep:!0},page:{handler(){this.updatePaginatedBooks()},deep:!0}},methods:{updatePaginatedBooks(){console.log(this.page);const t=(this.page.current-1)*18,o=t+18;this.paginatedBooks=this.books.slice(t,o)},gotoPage(t){console.log(t,this.page),this.page.current=t,this.updatePaginatedBooks(),this.gotoTopList()},gotoNxtPage(){this.page.current<this.page.max&&this.page.current++,this.updatePaginatedBooks(),this.gotoTopList()},gotoPrePage(){this.page.current>1&&this.page.current--,this.updatePaginatedBooks(),this.gotoTopList()},gotoTopList(){document.getElementById("booklist").scrollIntoView({behavior:"smooth"})}},provide(){return{page:x(this.page),gotoPage:t=>this.gotoPage(t),gotoNxtPage:()=>this.gotoNxtPage(),gotoPrePage:()=>this.gotoPrePage()}}},L={class:"container mx-auto book-list-container",id:"booklist"},$={key:0,class:"grid grid-cols-1 gap-6 mt-4 sm:grid-cols-2 lg:grid-cols-5"},T=["src","alt"],F={class:"mb-2 text-lg font-semibold"},N={class:"text-gray-700"};function I(t,o,m,k,a,p){const r=B,c=h;return s(),n("div",L,[a.paginatedBooks?(s(),n("div",$,[(s(!0),n(f,null,P(a.paginatedBooks,e=>(s(),y(r,{key:e.id,to:e.link,class:"p-4 bg-white rounded shadow book-card"},{default:v(()=>[i("img",{src:e.cover,alt:e.title,class:"object-cover w-full h-48 mb-4 rounded"},null,8,T),i("h3",F,l(e.title),1),i("p",N,l(e.author),1)]),_:2},1032,["to"]))),128))])):b("",!0),d(c)])}const _=u(w,[["render",I],["__scopeId","data-v-694cd3de"]]),V={components:{BookSearch:g,BookList:_},data(){return{books:null,filteredBooks:[]}},async created(){try{const t=await fetch("/data/book.json");this.books=await t.json()}catch(t){console.error("Error fetching top books:",t)}this.filteredBooks=this.books},methods:{applyFilter(t){this.filteredBooks=this.books.filter(o=>o.title.includes(t.searchQuery)&&o.author.includes(t.publisher)&&(t.bookType==="all"||o.type===t.bookType)&&(t.edition===""||o.edition===t.edition))}}};function j(t,o,m,k,a,p){const r=g,c=_;return s(),n("div",null,[o[0]||(o[0]=i("h2",{class:"my-6 text-2xl font-bold text-center"},"Tìm sách",-1)),d(r,{onFilter:p.applyFilter},null,8,["onFilter"]),d(c,{books:a.filteredBooks},null,8,["books"])])}const q=u(V,[["render",j],["__scopeId","data-v-be2c1995"]]);export{q as default};
