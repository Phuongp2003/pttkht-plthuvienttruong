import{k as u,r as b,c as s,e as i,F as y,C as B,G as p,w as P,f as n,t as h,h as _,i as m,H as v}from"./DQ-OUx2J.js";import{_ as k}from"./O6IAEoZt.js";import{_ as w}from"./rZ2at9C_.js";import{_ as f}from"./n4-TGolx.js";import{u as L}from"./CgZIMj1m.js";import"./Cpj98o6Y.js";const T={components:{Pagination:f},props:{books:{type:Array,required:!0}},data(){return{page:{current:1,max:1},paginatedBooks:[]}},mounted(){this.page.max=Math.ceil(this.books.length/18),this.page.current=1,this.updatePaginatedBooks()},watch:{books:{handler(){this.page.max=Math.ceil(this.books.length/18),this.page.current=1,this.updatePaginatedBooks()},immediate:!0,deep:!0},page:{handler(){this.updatePaginatedBooks()},deep:!0}},methods:{updatePaginatedBooks(){const t=(this.page.current-1)*18,o=t+18;this.paginatedBooks=this.books.slice(t,o)},gotoPage(t){console.log(t,this.page),this.page.current=t,this.updatePaginatedBooks(),this.gotoTopList()},gotoNxtPage(){this.page.current<this.page.max&&this.page.current++,this.updatePaginatedBooks(),this.gotoTopList()},gotoPrePage(){this.page.current>1&&this.page.current--,this.updatePaginatedBooks(),this.gotoTopList()},gotoTopList(){document.getElementById("booklist").scrollIntoView({behavior:"smooth"})}},provide(){return{page:b(this.page),gotoPage:t=>this.gotoPage(t),gotoNxtPage:()=>this.gotoNxtPage(),gotoPrePage:()=>this.gotoPrePage()}}},$={class:"container mx-auto book-list-container",id:"booklist"},F={key:0,class:"grid grid-cols-1 gap-6 mt-4 sm:grid-cols-2 lg:grid-cols-5"},N=["src","alt"],M={class:"mb-2 text-lg font-semibold"},j={class:"text-gray-700"};function I(t,o,l,r,a,g){const c=w,d=f;return s(),i("div",$,[a.paginatedBooks?(s(),i("div",F,[(s(!0),i(y,null,B(a.paginatedBooks,e=>(s(),p(c,{key:e.id,to:`${e.link}/edit`,class:"relative p-4 bg-white rounded shadow book-card"},{default:P(()=>[n("img",{src:e.cover,alt:e.title,class:"object-cover w-full h-48 mb-4 rounded"},null,8,N),n("h3",M,h(e.title),1),n("p",j,h(e.author),1),o[0]||(o[0]=n("div",{class:"absolute inset-0 flex items-center justify-center text-lg font-semibold text-white transition-opacity duration-300 bg-blue-500 bg-opacity-75 rounded opacity-0 hover:opacity-100"}," Sửa thông tin sách ",-1))]),_:2},1032,["to"]))),128))])):_("",!0),m(d)])}const x=u(T,[["render",I],["__scopeId","data-v-52da3001"]]),S={components:{BookSearch:k,BookListManage:x},data(){return{books:null,filteredBooks:[],loading:!1}},async created(){try{const{data:t,pending:o,error:l}=await L("books",()=>fetch("/data/book.json").then(r=>r.json()));this.loading=o,this.books=t}catch(t){console.error("Error fetching top books:",t)}this.filteredBooks=this.books},methods:{applyFilter(t){this.filteredBooks=this.books.filter(o=>o.title.includes(t.searchQuery)&&o.author.includes(t.publisher)&&(t.bookType==="all"||o.type===t.bookType)&&(t.edition===""||o.edition===t.edition))}}},V={key:1};function C(t,o,l,r,a,g){const c=v,d=k,e=x;return s(),i("div",null,[o[0]||(o[0]=n("h2",{class:"my-6 text-2xl font-bold text-center"},"Tìm sách",-1)),a.loading?(s(),p(c,{key:0})):(s(),i("div",V,[m(d,{onFilter:g.applyFilter},null,8,["onFilter"]),a.filteredBooks?(s(),p(e,{key:0,books:a.filteredBooks},null,8,["books"])):_("",!0)]))])}const Q=u(S,[["render",C],["__scopeId","data-v-4d0e14ca"]]);export{Q as default};
