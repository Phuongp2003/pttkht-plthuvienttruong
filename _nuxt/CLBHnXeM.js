import{_ as h}from"./6Sk3rhAD.js";import{k as u,r as _,c as n,e as a,F as B,B as f,h as k,i as g,f as o,t as l,E as w,G as b,A as x}from"./LFDqsYmP.js";const C={components:{Pagination:h},props:{books:{type:Array,required:!0}},data(){return{page:{current:1,max:1},paginatedBooks:[]}},mounted(){this.page.max=Math.ceil(this.books.length/18),this.page.current=1,this.updatePaginatedBooks()},watch:{books:{handler(){this.page.max=Math.ceil(this.books.length/18),this.page.current=1,this.updatePaginatedBooks()},immediate:!0,deep:!0},page:{handler(){this.updatePaginatedBooks()},deep:!0}},methods:{updatePaginatedBooks(){const t=(this.page.current-1)*18,s=t+18;this.paginatedBooks=this.books.slice(t,s)},gotoPage(t){this.page.current=t,this.updatePaginatedBooks(),this.gotoTopList()},gotoNxtPage(){this.page.current<this.page.max&&this.page.current++,this.updatePaginatedBooks(),this.gotoTopList()},gotoPrePage(){this.page.current>1&&this.page.current--,this.updatePaginatedBooks(),this.gotoTopList()},gotoTopList(){document.getElementById("booklist").scrollIntoView({behavior:"smooth"})},deleteBook(t){this.paginatedBooks=this.paginatedBooks.filter(s=>s.id!==t)},incrementBorrowCount(t){t.borrowCount?t.borrowCount++:t.borrowCount=1},decrementBorrowCount(t){!t.borrowCount||t.borrowCount<=1?t.borrowCount=1:t.borrowCount--},confirmBorrow(){this.$emit("confirmBorrow",this.paginatedBooks)}},provide(){return{page:_(this.page),gotoPage:t=>this.gotoPage(t),gotoNxtPage:()=>this.gotoNxtPage(),gotoPrePage:()=>this.gotoPrePage()}}},v={class:"container mx-auto book-list-container",id:"booklist"},P={key:0,class:"grid grid-cols-1 gap-6 mt-4"},y={class:"flex items-center"},L=["src","alt"],N={class:"flex-grow ml-4"},V={class:"mb-2 text-lg font-semibold"},$={class:"text-gray-700"},T={class:"flex items-center space-x-2"},j=["onClick"],E={class:"flex items-center space-x-1"},I=["onClick"],D=["onUpdate:modelValue"],M=["onClick"],U={class:"flex justify-center mt-6"};function A(t,s,p,m,i,r){const d=h;return n(),a("div",v,[i.paginatedBooks?(n(),a("div",P,[(n(!0),a(B,null,f(i.paginatedBooks,e=>(n(),a("div",{key:e.id,class:"p-4 bg-white rounded shadow-sm book-card shadow-neutral-600"},[o("div",y,[o("img",{src:e.cover,alt:e.title,class:"object-cover w-24 h-24 mb-4 rounded"},null,8,L),o("div",N,[o("h3",V,l(e.title),1),o("p",$,l(e.author),1)]),o("div",T,[o("button",{onClick:c=>r.deleteBook(e.id),class:"p-2 text-white bg-red-500 rounded"}," Delete ",8,j),o("div",E,[o("button",{onClick:c=>r.decrementBorrowCount(e),class:"p-2 text-black bg-gray-300 rounded"}," - ",8,I),w(o("input",{type:"number","onUpdate:modelValue":c=>e.borrowCount=c,class:"w-16 p-2 border rounded"},null,8,D),[[b,e.borrowCount,void 0,{number:!0}]]),o("button",{onClick:c=>r.incrementBorrowCount(e),class:"p-2 text-black bg-gray-300 rounded"}," + ",8,M)])])])]))),128))])):k("",!0),g(d,{class:"mt-4"}),o("div",U,[o("button",{class:"px-4 py-2 text-white bg-blue-500 rounded",onClick:s[0]||(s[0]=(...e)=>r.confirmBorrow&&r.confirmBorrow(...e))}," Xác nhận mượn ")])])}const F=u(C,[["render",A],["__scopeId","data-v-6855b7c0"]]),X={components:{BookListBC:F},data(){return{books:null,filteredBooks:[]}},async created(){try{const t=await fetch("/data/bookUB.json");this.books=await t.json()}catch(t){console.error("Error fetching top books:",t)}this.filteredBooks=this.books},methods:{handleConfirmBorrow(t){console.log("Books to borrow:",t),this.$router.push("/borrow-history")}}};function q(t,s,p,m,i,r){const d=x("BookListBC");return n(),a("div",null,[s[0]||(s[0]=o("h2",{class:"my-6 text-2xl font-bold text-center"},"Xác nhận sách mượn",-1)),g(d,{books:i.filteredBooks,onConfirmBorrow:r.handleConfirmBorrow},null,8,["books","onConfirmBorrow"])])}const z=u(X,[["render",q],["__scopeId","data-v-6f81a939"]]);export{z as default};
