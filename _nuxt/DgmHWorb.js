import{k as _,r as x,c as s,e as n,F as B,C as b,G as u,w as P,f as i,t as h,h as y,i as p,H as v}from"./BWJ-l1R_.js";import{_ as m}from"./D1j4jfNd.js";import{_ as L}from"./DlG7jwpu.js";import{_ as k}from"./C8tI3iOa.js";import{u as w}from"./CDSrbsho.js";import"./Cpj98o6Y.js";const T={components:{Pagination:k},props:{books:{type:Array,required:!0}},data(){return{page:{current:1,max:1},paginatedBooks:[]}},mounted(){this.page.max=Math.ceil(this.books.length/18),this.page.current=1,this.updatePaginatedBooks()},watch:{books:{handler(){this.page.max=Math.ceil(this.books.length/18),this.page.current=1,this.updatePaginatedBooks()},immediate:!0,deep:!0},page:{handler(){this.updatePaginatedBooks()},deep:!0}},methods:{updatePaginatedBooks(){console.log(this.page);const t=(this.page.current-1)*18,o=t+18;this.paginatedBooks=this.books.slice(t,o)},gotoPage(t){console.log(t,this.page),this.page.current=t,this.updatePaginatedBooks(),this.gotoTopList()},gotoNxtPage(){this.page.current<this.page.max&&this.page.current++,this.updatePaginatedBooks(),this.gotoTopList()},gotoPrePage(){this.page.current>1&&this.page.current--,this.updatePaginatedBooks(),this.gotoTopList()},gotoTopList(){document.getElementById("booklist").scrollIntoView({behavior:"smooth"})}},provide(){return{page:x(this.page),gotoPage:t=>this.gotoPage(t),gotoNxtPage:()=>this.gotoNxtPage(),gotoPrePage:()=>this.gotoPrePage()}}},$={class:"container mx-auto book-list-container",id:"booklist"},F={key:0,class:"grid grid-cols-1 gap-6 mt-4 sm:grid-cols-2 lg:grid-cols-5"},N=["src","alt"],I={class:"mb-2 text-lg font-semibold"},V={class:"text-gray-700"};function j(t,o,l,r,a,g){const c=L,d=k;return s(),n("div",$,[a.paginatedBooks?(s(),n("div",F,[(s(!0),n(B,null,b(a.paginatedBooks,e=>(s(),u(c,{key:e.id,to:e.link,class:"p-4 bg-white rounded shadow book-card"},{default:P(()=>[i("img",{src:e.cover,alt:e.title,class:"object-cover w-full h-48 mb-4 rounded"},null,8,N),i("h3",I,h(e.title),1),i("p",V,h(e.author),1)]),_:2},1032,["to"]))),128))])):y("",!0),p(d)])}const f=_(T,[["render",j],["__scopeId","data-v-694cd3de"]]),C={components:{BookSearch:m,BookList:f},data(){return{books:null,filteredBooks:[],loading:!1}},async created(){try{const{data:t,pending:o,error:l}=await w("books",()=>fetch("/data/book.json").then(r=>r.json()));this.loading=o,this.books=t}catch(t){console.error("Error fetching top books:",t)}this.filteredBooks=this.books},methods:{applyFilter(t){this.filteredBooks=this.books.filter(o=>o.title.includes(t.searchQuery)&&o.author.includes(t.publisher)&&(t.bookType==="all"||o.type===t.bookType)&&(t.edition===""||o.edition===t.edition))}}},D={key:1};function E(t,o,l,r,a,g){const c=v,d=m,e=f;return s(),n("div",null,[o[0]||(o[0]=i("h2",{class:"my-6 text-2xl font-bold text-center"},"Tìm sách",-1)),a.loading?(s(),u(c,{key:0})):(s(),n("div",D,[p(d,{onFilter:g.applyFilter},null,8,["onFilter"]),p(e,{books:a.filteredBooks},null,8,["books"])]))])}const Q=_(C,[["render",E],["__scopeId","data-v-eda3cd8f"]]);export{Q as default};
