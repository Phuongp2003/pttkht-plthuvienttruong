import{k as p,c as n,e as i,f as s,F as b,C as _,t as c,G as k,w as f,i as m,H as B}from"./D6htSX5a.js";import{_ as g}from"./DdVhL_eg.js";import{_ as P}from"./DleLCrF3.js";import{u as y}from"./DhR1dvwk.js";import"./Cpj98o6Y.js";const v={data(){return{booksByPublisher:{},selectedPublisher:null}},async created(){try{const{data:e}=await y("books",()=>fetch("/data/books.json").then(t=>t.json()));this.booksByPublisher=e}catch(e){console.error("Error fetching data:",e)}},methods:{selectPublisher(e){this.selectedPublisher=e},deselectPublisher(){this.selectedPublisher=null},addAllBooksToWarehouse(){this.$emit("add-all-books",this.booksByPublisher[this.selectedPublisher]),this.$delete(this.booksByPublisher,this.selectedPublisher),this.selectedPublisher=null}}},w={class:"container mx-auto book-list-container",id:"booklist"},T={key:0},C={class:"grid grid-cols-1 gap-6 mt-4 sm:grid-cols-2 lg:grid-cols-3"},S=["onClick"],j={class:"text-lg font-semibold"},F={class:"text-gray-700"},I={key:1},L={class:"my-6 text-2xl font-bold text-center"},N={class:"p-4 mb-4 bg-gray-100 rounded shadow"},A={class:"text-gray-700"},D={class:"grid grid-cols-1 gap-6 mt-4 sm:grid-cols-2 lg:grid-cols-5"},E=["src","alt"],W={class:"mb-2 text-lg font-semibold"},Q={class:"text-gray-700"};function V(e,t,u,a,l,r){const h=P;return n(),i("div",w,[l.selectedPublisher?(n(),i("div",I,[s("button",{onClick:t[0]||(t[0]=(...o)=>r.deselectPublisher&&r.deselectPublisher(...o)),class:"p-2 mb-4 text-white bg-blue-500 rounded"}," Quay lại "),s("h2",L,c(l.selectedPublisher),1),s("div",N,[t[3]||(t[3]=s("h3",{class:"text-lg font-semibold"},"Thông tin Nhà Xuất Bản",-1)),s("p",A," Số sách: "+c(l.booksByPublisher[l.selectedPublisher].length),1),s("button",{onClick:t[1]||(t[1]=(...o)=>r.addAllBooksToWarehouse&&r.addAllBooksToWarehouse(...o)),class:"p-2 mt-2 text-white bg-green-500 rounded"}," Thêm tất cả sách vào kho ")]),s("div",D,[(n(!0),i(b,null,_(l.booksByPublisher[l.selectedPublisher],o=>(n(),k(h,{key:o.id,to:`${o.link}/edit`,class:"relative p-4 bg-white rounded shadow book-card"},{default:f(()=>[s("img",{src:o.cover,alt:o.title,class:"object-cover w-full h-48 mb-4 rounded"},null,8,E),s("h3",W,c(o.title),1),s("p",Q,c(o.author),1),t[4]||(t[4]=s("div",{class:"absolute inset-0 flex items-center justify-center text-lg font-semibold text-white transition-opacity duration-300 bg-blue-500 bg-opacity-75 rounded opacity-0 hover:opacity-100"}," Sửa thông tin sách ",-1))]),_:2},1032,["to"]))),128))])])):(n(),i("div",T,[t[2]||(t[2]=s("h2",{class:"my-6 text-2xl font-bold text-center"}," Chọn Nhà Xuất Bản ",-1)),s("div",C,[(n(!0),i(b,null,_(l.booksByPublisher,(o,d)=>(n(),i("div",{key:d,class:"p-4 bg-white rounded shadow cursor-pointer hover:bg-gray-100",onClick:$=>r.selectPublisher(d)},[s("h3",j,c(d),1),s("p",F,"Số sách: "+c(o.length),1)],8,S))),128))])]))])}const x=p(v,[["render",V],["__scopeId","data-v-369dc24f"]]),X={components:{BookSearch:g,ImportBookList:x},data(){return{books:null,filteredBooks:[],loading:!1}},async created(){try{const{data:e,pending:t,error:u}=await y("books",()=>fetch("http://localhost:3000/data/bookS.json").then(a=>a.json()));this.books=e}catch(e){console.error("Error fetching top books:",e)}this.loading=loading,this.filteredBooks=this.books},methods:{applyFilter(e){this.filteredBooks=this.books.filter(t=>t.title.includes(e.searchQuery)&&t.author.includes(e.publisher)&&(e.bookType==="all"||t.type===e.bookType)&&(e.edition===""||t.edition===e.edition))}}},G={key:1};function H(e,t,u,a,l,r){const h=B,o=g,d=x;return n(),i("div",null,[t[0]||(t[0]=s("h2",{class:"my-6 text-2xl font-bold text-center"},"Tìm sách",-1)),l.loading?(n(),k(h,{key:0})):(n(),i("div",G,[m(o,{onFilter:r.applyFilter},null,8,["onFilter"]),m(d,{books:l.filteredBooks},null,8,["books"])]))])}const O=p(X,[["render",H],["__scopeId","data-v-308aa86d"]]);export{O as default};
