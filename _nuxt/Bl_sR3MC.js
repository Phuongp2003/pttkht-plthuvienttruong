import{_ as p}from"./Bnx14dP4.js";import{_ as x}from"./6Sk3rhAD.js";import{k as B,c as n,e as l,f as t,F as h,B as _,h as g,i as m,t as r,g as i,A as b}from"./LFDqsYmP.js";import"./Cpj98o6Y.js";const f={components:{Pagination:x},props:{books:{type:Array,required:!0}},data(){return{overdueBooks:[],borrowedBooks:[],returnedBooks:[]}},mounted(){this.categorizeBooks()},watch:{books:{handler(){this.categorizeBooks()},immediate:!0,deep:!0}},methods:{categorizeBooks(){const o=new Date().toISOString().split("T")[0];this.overdueBooks=this.books.filter(s=>s.status==="IB"&&s.returnDate<o),this.borrowedBooks=this.books.filter(s=>s.status==="IB"&&s.returnDate>=o),this.returnedBooks=this.books.filter(s=>s.status==="IR")},reportLost(o){this.$router.push({path:"/lost-report",query:{bookId:o}})},extendBorrow(o){console.log("Extend borrow for book ID:",o)}}},v={class:"container mx-auto book-list-container",id:"booklist"},k={key:0,class:"grid grid-cols-1 gap-6 mt-4"},C={class:"flex items-center"},D=["src","alt"],I={class:"flex-grow ml-4"},N={class:"mb-2 text-lg font-semibold"},L={class:"text-gray-700"},S={class:"text-gray-700"},T={class:"text-gray-700"},F={class:"text-gray-700"},j={class:"flex items-center space-x-2"},H=["onClick"],V=["onClick"],$={key:1,class:"grid grid-cols-1 gap-6 mt-4"},q={class:"flex items-center"},z=["src","alt"],E={class:"flex-grow ml-4"},A={class:"mb-2 text-lg font-semibold"},G={class:"text-gray-700"},P={class:"text-gray-700"},O={class:"text-gray-700"},Q={class:"text-gray-700"},R={class:"flex items-center space-x-2"},U=["onClick"],J=["onClick"],K={key:2,class:"grid grid-cols-1 gap-6 mt-4"},M={class:"flex items-center"},W=["src","alt"],X={class:"flex-grow ml-4"},Y={class:"mb-2 text-lg font-semibold"},Z={class:"text-gray-700"},tt={class:"text-gray-700"},st={class:"text-gray-700"},et={class:"text-gray-700"};function ot(o,s,y,w,d,a){const c=x;return n(),l("div",v,[s[9]||(s[9]=t("h2",{class:"mb-6 text-2xl font-bold"},"Sách quá hạn",-1)),d.overdueBooks.length?(n(),l("div",k,[(n(!0),l(h,null,_(d.overdueBooks,e=>(n(),l("div",{key:e.id,class:"p-4 bg-white rounded shadow-sm shadow-neutral-600 book-card"},[t("div",C,[t("img",{src:e.cover,alt:e.title,class:"object-cover w-24 h-24 mb-4 rounded"},null,8,D),t("div",I,[t("h3",N,r(e.title),1),t("p",L,r(e.author),1),t("p",S,[s[0]||(s[0]=t("strong",null,"Ngày mượn:",-1)),i(" "+r(e.borrowDate),1)]),t("p",T,[s[1]||(s[1]=t("strong",null,"Ngày đến hạn:",-1)),i(" "+r(e.returnDate),1)]),t("p",F,[s[2]||(s[2]=t("strong",null,"Trạng thái:",-1)),i(" "+r(e.status==="IB"?"Chưa trả":"Đã trả"),1)])]),t("div",j,[t("button",{onClick:u=>a.reportLost(e.id),class:"p-2 text-white bg-yellow-500 rounded"}," Báo mất ",8,H),t("button",{onClick:u=>a.extendBorrow(e.id),class:"p-2 text-white bg-blue-500 rounded"}," Gia hạn mượn ",8,V)])])]))),128))])):g("",!0),s[10]||(s[10]=t("h2",{class:"mt-4 mb-6 text-2xl font-bold"},"Sách đang mượn",-1)),d.borrowedBooks.length?(n(),l("div",$,[(n(!0),l(h,null,_(d.borrowedBooks,e=>(n(),l("div",{key:e.id,class:"p-4 bg-white rounded shadow-sm shadow-neutral-600 book-card"},[t("div",q,[t("img",{src:e.cover,alt:e.title,class:"object-cover w-24 h-24 mb-4 rounded"},null,8,z),t("div",E,[t("h3",A,r(e.title),1),t("p",G,r(e.author),1),t("p",P,[s[3]||(s[3]=t("strong",null,"Ngày mượn:",-1)),i(" "+r(e.borrowDate),1)]),t("p",O,[s[4]||(s[4]=t("strong",null,"Ngày đến hạn:",-1)),i(" "+r(e.returnDate),1)]),t("p",Q,[s[5]||(s[5]=t("strong",null,"Trạng thái:",-1)),i(" "+r(e.status==="IB"?"Chưa trả":"Đã trả"),1)])]),t("div",R,[t("button",{onClick:u=>a.reportLost(e.id),class:"p-2 text-white bg-yellow-500 rounded"}," Báo mất ",8,U),t("button",{onClick:u=>a.extendBorrow(e.id),class:"p-2 text-white bg-blue-500 rounded"}," Gia hạn mượn ",8,J)])])]))),128))])):g("",!0),s[11]||(s[11]=t("h2",{class:"mt-4 mb-6 text-2xl font-bold"},"Sách đã trả",-1)),d.returnedBooks.length?(n(),l("div",K,[(n(!0),l(h,null,_(d.returnedBooks,e=>(n(),l("div",{key:e.id,class:"p-4 bg-white rounded shadow-sm shadow-neutral-600 book-card"},[t("div",M,[t("img",{src:e.cover,alt:e.title,class:"object-cover w-24 h-24 mb-4 rounded"},null,8,W),t("div",X,[t("h3",Y,r(e.title),1),t("p",Z,r(e.author),1),t("p",tt,[s[6]||(s[6]=t("strong",null,"Ngày mượn:",-1)),i(" "+r(e.borrowDate),1)]),t("p",st,[s[7]||(s[7]=t("strong",null,"Ngày đến hạn:",-1)),i(" "+r(e.returnDate),1)]),t("p",et,[s[8]||(s[8]=t("strong",null,"Trạng thái:",-1)),i(" "+r(e.status==="IB"?"Chưa trả":"Đã trả"),1)])])])]))),128))])):g("",!0),m(c)])}const rt=B(f,[["render",ot],["__scopeId","data-v-6d2ceda9"]]),nt={components:{BookSearch:p,BookListBH:rt},data(){return{books:null,filteredBooks:[]}},async created(){try{const o=await fetch("/data/bookUBH.json");this.books=await o.json()}catch(o){console.error("Error fetching top books:",o)}this.filteredBooks=this.books},methods:{applyFilter(o){this.filteredBooks=this.books.filter(s=>s.title.includes(o.searchQuery)&&s.author.includes(o.publisher)&&(o.bookType==="all"||s.type===o.bookType)&&(o.edition===""||s.edition===o.edition))}}};function lt(o,s,y,w,d,a){const c=p,e=b("BookListBH");return n(),l("div",null,[s[0]||(s[0]=t("h2",{class:"my-6 text-2xl font-bold text-center"},"Lịch sử mượn sách",-1)),m(c,{onFilter:a.applyFilter},null,8,["onFilter"]),m(e,{books:d.filteredBooks},null,8,["books"])])}const ut=B(nt,[["render",lt],["__scopeId","data-v-438bb4fd"]]);export{ut as default};
