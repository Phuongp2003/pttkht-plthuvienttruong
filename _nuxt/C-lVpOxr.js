import{k as g,c as l,e as i,f as t,F as _,C as b,t as c,G as p,w as f,i as m,H as x}from"./DQ-OUx2J.js";import{_ as k}from"./O6IAEoZt.js";import{_ as B}from"./rZ2at9C_.js";import{u as P}from"./CgZIMj1m.js";import"./Cpj98o6Y.js";const v={props:{booksByPublisher:{type:Array,required:!0}},data(){return{selectedPublisher:null,loading:!1}},async created(){},methods:{selectPublisher(s){this.selectedPublisher=s},deselectPublisher(){this.selectedPublisher=null},addAllBooksToWarehouse(){this.$emit("add-all-books",this.booksByPublisher[this.selectedPublisher]),this.$delete(this.booksByPublisher,this.selectedPublisher),this.selectedPublisher=null}}},w={class:"container mx-auto book-list-container",id:"booklist"},T={key:0},C={class:"grid grid-cols-1 gap-6 mt-4 sm:grid-cols-2 lg:grid-cols-3"},S=["onClick"],F={class:"text-lg font-semibold"},A={class:"text-gray-700"},I={key:1},L={class:"my-6 text-2xl font-bold text-center"},N={class:"p-4 mb-4 bg-gray-100 rounded shadow"},j={class:"text-gray-700"},D={class:"grid grid-cols-1 gap-6 mt-4 sm:grid-cols-2 lg:grid-cols-5"},W=["src","alt"],E={class:"mb-2 text-lg font-semibold"},Q={class:"text-gray-700"};function V(s,e,d,h,n,r){const u=B;return l(),i("div",w,[n.selectedPublisher?(l(),i("div",I,[t("button",{onClick:e[0]||(e[0]=(...o)=>r.deselectPublisher&&r.deselectPublisher(...o)),class:"p-2 mb-4 text-white bg-blue-500 rounded"}," Quay lại "),t("h2",L,c(n.selectedPublisher),1),t("div",N,[e[3]||(e[3]=t("h3",{class:"text-lg font-semibold"},"Thông tin Nhà Xuất Bản",-1)),t("p",j," Số sách: "+c(d.booksByPublisher[n.selectedPublisher].length),1),t("button",{onClick:e[1]||(e[1]=(...o)=>r.addAllBooksToWarehouse&&r.addAllBooksToWarehouse(...o)),class:"p-2 mt-2 text-white bg-green-500 rounded"}," Thêm tất cả sách vào kho ")]),t("div",D,[(l(!0),i(_,null,b(d.booksByPublisher[n.selectedPublisher],o=>(l(),p(u,{key:o.id,to:`${o.link}/edit`,class:"relative p-4 bg-white rounded shadow book-card"},{default:f(()=>[t("img",{src:o.cover,alt:o.title,class:"object-cover w-full h-48 mb-4 rounded"},null,8,W),t("h3",E,c(o.title),1),t("p",Q,c(o.author),1),e[4]||(e[4]=t("div",{class:"absolute inset-0 flex items-center justify-center text-lg font-semibold text-white transition-opacity duration-300 bg-blue-500 bg-opacity-75 rounded opacity-0 hover:opacity-100"}," Sửa thông tin sách ",-1))]),_:2},1032,["to"]))),128))])])):(l(),i("div",T,[e[2]||(e[2]=t("h2",{class:"my-6 text-2xl font-bold text-center"}," Chọn Nhà Xuất Bản ",-1)),t("div",C,[(l(!0),i(_,null,b(d.booksByPublisher,(o,a)=>(l(),i("div",{key:a,class:"p-4 bg-white rounded shadow cursor-pointer hover:bg-gray-100",onClick:H=>r.selectPublisher(a)},[t("h3",F,c(a),1),t("p",A,"Số sách: "+c(o.length),1)],8,S))),128))])]))])}const y=g(v,[["render",V],["__scopeId","data-v-228cc23c"]]),X={components:{BookSearch:k,ImportBookList:y},data(){return{books:null,filteredBooks:[],loading:!1}},async created(){try{const{data:s,pending:e,error:d}=await P("books",()=>fetch("/data/bookS.json").then(h=>h.json()));this.loading=e,this.books=s}catch(s){console.error("Error fetching top books:",s)}this.filteredBooks=this.books},methods:{applyFilter(s){this.filteredBooks=this.books.filter(e=>e.title.includes(s.searchQuery)&&e.author.includes(s.publisher)&&(s.bookType==="all"||e.type===s.bookType)&&(s.edition===""||e.edition===s.edition))}}},q={key:1};function G(s,e,d,h,n,r){const u=x,o=k,a=y;return l(),i("div",null,[e[0]||(e[0]=t("h2",{class:"my-6 text-2xl font-bold text-center"},"Tìm sách",-1)),n.loading?(l(),p(u,{key:0})):(l(),i("div",q,[m(o,{onFilter:r.applyFilter},null,8,["onFilter"]),m(a,{books:n.filteredBooks},null,8,["books"])]))])}const O=g(X,[["render",G],["__scopeId","data-v-f7aeffb3"]]);export{O as default};
