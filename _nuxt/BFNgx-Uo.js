import{k as y,c as n,e as i,f as t,F as _,B as g,t as r,g as d,h as m,i as p,A as w,G as b,H as f}from"./CTgkKhgB.js";import{_ as B}from"./DqUGzaU8.js";import{_ as k}from"./BqophdLW.js";import{u as v}from"./CYg_ePKU.js";import"./Cpj98o6Y.js";const D={components:{Pagination:k},props:{books:{type:Array,required:!0}},data(){return{overdueBooks:[],borrowedBooks:[],returnedBooks:[]}},mounted(){this.categorizeBooks()},watch:{books:{handler(){this.categorizeBooks()},immediate:!0,deep:!0}},methods:{categorizeBooks(){const e=new Date().toISOString().split("T")[0];this.overdueBooks=this.books.filter(s=>s.status==="IB"&&s.returnDate<e),this.borrowedBooks=this.books.filter(s=>s.status==="IB"&&s.returnDate>=e),this.returnedBooks=this.books.filter(s=>s.status==="IR")},reportLost(e){this.$router.push({path:"/lost-report",query:{bookId:e}})},extendBorrow(e){console.log("Extend borrow for book ID:",e)}}},C={class:"container mx-auto book-list-container",id:"booklist"},I={key:0,class:"grid grid-cols-1 gap-6 mt-4"},N={class:"flex items-center"},L=["src","alt"],S={class:"flex-grow ml-4"},T={class:"mb-2 text-lg font-semibold"},F={class:"text-gray-700"},H={class:"text-gray-700"},j={class:"text-gray-700"},V={class:"text-gray-700"},$={class:"flex items-center space-x-2"},q=["onClick"],z=["onClick"],A={key:1,class:"grid grid-cols-1 gap-6 mt-4"},E={class:"flex items-center"},G=["src","alt"],P={class:"flex-grow ml-4"},O={class:"mb-2 text-lg font-semibold"},Q={class:"text-gray-700"},R={class:"text-gray-700"},U={class:"text-gray-700"},J={class:"text-gray-700"},K={class:"flex items-center space-x-2"},M=["onClick"],W=["onClick"],X={key:2,class:"grid grid-cols-1 gap-6 mt-4"},Y={class:"flex items-center"},Z=["src","alt"],tt={class:"flex-grow ml-4"},st={class:"mb-2 text-lg font-semibold"},ot={class:"text-gray-700"},et={class:"text-gray-700"},rt={class:"text-gray-700"},nt={class:"text-gray-700"};function it(e,s,x,u,l,a){const h=k;return n(),i("div",C,[s[9]||(s[9]=t("h2",{class:"mb-6 text-2xl font-bold"},"Sách quá hạn",-1)),l.overdueBooks.length?(n(),i("div",I,[(n(!0),i(_,null,g(l.overdueBooks,o=>(n(),i("div",{key:o.id,class:"p-4 bg-white rounded shadow-sm shadow-neutral-600 book-card"},[t("div",N,[t("img",{src:o.cover,alt:o.title,class:"object-cover w-24 h-24 mb-4 rounded"},null,8,L),t("div",S,[t("h3",T,r(o.title),1),t("p",F,r(o.author),1),t("p",H,[s[0]||(s[0]=t("strong",null,"Ngày mượn:",-1)),d(" "+r(o.borrowDate),1)]),t("p",j,[s[1]||(s[1]=t("strong",null,"Ngày đến hạn:",-1)),d(" "+r(o.returnDate),1)]),t("p",V,[s[2]||(s[2]=t("strong",null,"Trạng thái:",-1)),d(" "+r(o.status==="IB"?"Chưa trả":"Đã trả"),1)])]),t("div",$,[t("button",{onClick:c=>a.reportLost(o.id),class:"p-2 text-white bg-yellow-500 rounded"}," Báo mất ",8,q),t("button",{onClick:c=>a.extendBorrow(o.id),class:"p-2 text-white bg-blue-500 rounded"}," Gia hạn mượn ",8,z)])])]))),128))])):m("",!0),s[10]||(s[10]=t("h2",{class:"mt-4 mb-6 text-2xl font-bold"},"Sách đang mượn",-1)),l.borrowedBooks.length?(n(),i("div",A,[(n(!0),i(_,null,g(l.borrowedBooks,o=>(n(),i("div",{key:o.id,class:"p-4 bg-white rounded shadow-sm shadow-neutral-600 book-card"},[t("div",E,[t("img",{src:o.cover,alt:o.title,class:"object-cover w-24 h-24 mb-4 rounded"},null,8,G),t("div",P,[t("h3",O,r(o.title),1),t("p",Q,r(o.author),1),t("p",R,[s[3]||(s[3]=t("strong",null,"Ngày mượn:",-1)),d(" "+r(o.borrowDate),1)]),t("p",U,[s[4]||(s[4]=t("strong",null,"Ngày đến hạn:",-1)),d(" "+r(o.returnDate),1)]),t("p",J,[s[5]||(s[5]=t("strong",null,"Trạng thái:",-1)),d(" "+r(o.status==="IB"?"Chưa trả":"Đã trả"),1)])]),t("div",K,[t("button",{onClick:c=>a.reportLost(o.id),class:"p-2 text-white bg-yellow-500 rounded"}," Báo mất ",8,M),t("button",{onClick:c=>a.extendBorrow(o.id),class:"p-2 text-white bg-blue-500 rounded"}," Gia hạn mượn ",8,W)])])]))),128))])):m("",!0),s[11]||(s[11]=t("h2",{class:"mt-4 mb-6 text-2xl font-bold"},"Sách đã trả",-1)),l.returnedBooks.length?(n(),i("div",X,[(n(!0),i(_,null,g(l.returnedBooks,o=>(n(),i("div",{key:o.id,class:"p-4 bg-white rounded shadow-sm shadow-neutral-600 book-card"},[t("div",Y,[t("img",{src:o.cover,alt:o.title,class:"object-cover w-24 h-24 mb-4 rounded"},null,8,Z),t("div",tt,[t("h3",st,r(o.title),1),t("p",ot,r(o.author),1),t("p",et,[s[6]||(s[6]=t("strong",null,"Ngày mượn:",-1)),d(" "+r(o.borrowDate),1)]),t("p",rt,[s[7]||(s[7]=t("strong",null,"Ngày đến hạn:",-1)),d(" "+r(o.returnDate),1)]),t("p",nt,[s[8]||(s[8]=t("strong",null,"Trạng thái:",-1)),d(" "+r(o.status==="IB"?"Chưa trả":"Đã trả"),1)])])])]))),128))])):m("",!0),p(h)])}const lt=y(D,[["render",it],["__scopeId","data-v-6d2ceda9"]]),dt={components:{BookSearch:B,BookListBH:lt},data(){return{books:null,filteredBooks:[],loading:!1}},async created(){try{const{data:e,pending:s,error:x}=await v("books",()=>fetch("/data/bookUBH.json").then(u=>u.json()));this.loading=s,this.books=e}catch(e){console.error("Error fetching top books:",e)}this.filteredBooks=this.books},methods:{applyFilter(e){this.filteredBooks=this.books.filter(s=>s.title.includes(e.searchQuery)&&s.author.includes(e.publisher)&&(e.bookType==="all"||s.type===e.bookType)&&(e.edition===""||s.edition===e.edition))}}},at={key:1};function ct(e,s,x,u,l,a){const h=f,o=B,c=w("BookListBH");return n(),i("div",null,[s[0]||(s[0]=t("h2",{class:"my-6 text-2xl font-bold text-center"},"Lịch sử mượn sách",-1)),l.loading?(n(),b(h,{key:0})):(n(),i("div",at,[p(o,{onFilter:a.applyFilter},null,8,["onFilter"]),p(c,{books:l.filteredBooks},null,8,["books"])]))])}const pt=y(dt,[["render",ct],["__scopeId","data-v-a8235191"]]);export{pt as default};
