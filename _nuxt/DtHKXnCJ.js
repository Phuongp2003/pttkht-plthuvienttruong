import{k,c as n,e as l,G as _,f as o,F as g,C as m,t as c,w as P,H as y,i as p}from"./DvdhT6td.js";import{_ as f}from"./CP6rAmcq.js";import{_ as v}from"./DOef9am8.js";import{u as x}from"./DPHYbopj.js";import"./Cpj98o6Y.js";const w={data(){return{booksByPublisher:{},selectedPublisher:null,loading:!1}},async created(){try{const{data:e,pending:t,error:a}=await x("books",()=>fetch("/data/books.json").then(d=>d.json()));this.loading=t,this.booksByPublisher=e}catch(e){console.error("Error fetching data:",e)}},methods:{selectPublisher(e){this.selectedPublisher=e},deselectPublisher(){this.selectedPublisher=null},addAllBooksToWarehouse(){this.$emit("add-all-books",this.booksByPublisher[this.selectedPublisher]),this.$delete(this.booksByPublisher,this.selectedPublisher),this.selectedPublisher=null}}},T={class:"container mx-auto book-list-container",id:"booklist"},C={key:1},S={key:0},j={class:"grid grid-cols-1 gap-6 mt-4 sm:grid-cols-2 lg:grid-cols-3"},F=["onClick"],L={class:"text-lg font-semibold"},I={class:"text-gray-700"},N={key:1},A={class:"my-6 text-2xl font-bold text-center"},D={class:"p-4 mb-4 bg-gray-100 rounded shadow"},E={class:"text-gray-700"},W={class:"grid grid-cols-1 gap-6 mt-4 sm:grid-cols-2 lg:grid-cols-5"},Q=["src","alt"],V={class:"mb-2 text-lg font-semibold"},X={class:"text-gray-700"};function G(e,t,a,d,i,r){const h=y,u=v;return n(),l("div",T,[i.loading?(n(),_(h,{key:0})):(n(),l("div",C,[i.selectedPublisher?(n(),l("div",N,[o("button",{onClick:t[0]||(t[0]=(...s)=>r.deselectPublisher&&r.deselectPublisher(...s)),class:"p-2 mb-4 text-white bg-blue-500 rounded"}," Quay lại "),o("h2",A,c(i.selectedPublisher),1),o("div",D,[t[3]||(t[3]=o("h3",{class:"text-lg font-semibold"}," Thông tin Nhà Xuất Bản ",-1)),o("p",E," Số sách: "+c(i.booksByPublisher[i.selectedPublisher].length),1),o("button",{onClick:t[1]||(t[1]=(...s)=>r.addAllBooksToWarehouse&&r.addAllBooksToWarehouse(...s)),class:"p-2 mt-2 text-white bg-green-500 rounded"}," Thêm tất cả sách vào kho ")]),o("div",W,[(n(!0),l(g,null,m(i.booksByPublisher[i.selectedPublisher],s=>(n(),_(u,{key:s.id,to:`${s.link}/edit`,class:"relative p-4 bg-white rounded shadow book-card"},{default:P(()=>[o("img",{src:s.cover,alt:s.title,class:"object-cover w-full h-48 mb-4 rounded"},null,8,Q),o("h3",V,c(s.title),1),o("p",X,c(s.author),1),t[4]||(t[4]=o("div",{class:"absolute inset-0 flex items-center justify-center text-lg font-semibold text-white transition-opacity duration-300 bg-blue-500 bg-opacity-75 rounded opacity-0 hover:opacity-100"}," Sửa thông tin sách ",-1))]),_:2},1032,["to"]))),128))])])):(n(),l("div",S,[t[2]||(t[2]=o("h2",{class:"my-6 text-2xl font-bold text-center"}," Chọn Nhà Xuất Bản ",-1)),o("div",j,[(n(!0),l(g,null,m(i.booksByPublisher,(s,b)=>(n(),l("div",{key:b,class:"p-4 bg-white rounded shadow cursor-pointer hover:bg-gray-100",onClick:J=>r.selectPublisher(b)},[o("h3",L,c(b),1),o("p",I,"Số sách: "+c(s.length),1)],8,F))),128))])]))]))])}const B=k(w,[["render",G],["__scopeId","data-v-e4abfd73"]]),H={components:{BookSearch:f,ImportBookList:B},data(){return{books:null,filteredBooks:[],loading:!1}},async created(){try{const{data:e,pending:t,error:a}=await x("books",()=>fetch("/data/bookS.json").then(d=>d.json()));this.loading=t,this.books=e}catch(e){console.error("Error fetching top books:",e)}this.filteredBooks=this.books},methods:{applyFilter(e){this.filteredBooks=this.books.filter(t=>t.title.includes(e.searchQuery)&&t.author.includes(e.publisher)&&(e.bookType==="all"||t.type===e.bookType)&&(e.edition===""||t.edition===e.edition))}}},q={key:1};function z(e,t,a,d,i,r){const h=y,u=f,s=B;return n(),l("div",null,[t[0]||(t[0]=o("h2",{class:"my-6 text-2xl font-bold text-center"},"Tìm sách",-1)),i.loading?(n(),_(h,{key:0})):(n(),l("div",q,[p(u,{onFilter:r.applyFilter},null,8,["onFilter"]),p(s,{books:i.filteredBooks},null,8,["books"])]))])}const Y=k(H,[["render",z],["__scopeId","data-v-f7aeffb3"]]);export{Y as default};
